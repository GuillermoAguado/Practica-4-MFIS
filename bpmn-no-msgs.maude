--- Identificadores
mod Id is
    protecting STRING .
    sort Id .
    op id : String -> Id .
endm

view Id from TRIV to Id is
    sort Elt to Id .
endv



mod BPMN is
    --- Identificadores
    protecting Id .
    protecting SET{Id} .
    --- Puertas
    sort Gateway .
    op exclusive : -> Gateway [ctor] .
    op parallel : -> Gateway [ctor] .
    op event-based : -> Gateway [ctor] .
    --- Nodos
    sort Node .
    op start : Id Id -> Node [ctor] .
    op end : Id Id -> Node [ctor] .
    --- Tarea
    op task : Id String Id Id Time Set{Id} Set{Id} -> Node [ctor] .
    --- Split
    op split : Id Gateway Id Set{Id} -> Node [ctor] .
    --- Merge
    op merge : Id Gateway Set{Id} Id -> Node [ctor] .
    --- Recursos
    sort Resource .
    op resource : Id Nat Nat -> Resource [ctor] .
    --- Mensajes
    sort Event .
    op msg : String -> Event [ctor] .
    sort EventInstance . --- Potencialmente mal
    --- Flujo
    sort Flow .
    op flow : Id Event Id -> Flow [ctor] .
    op flow : Id Time -> Flow [ctor] . --- Potencialmente mal
    --- Token
    sort Token .
    op token : Id Time -> Token [ctor] .
    --- Proceso
    sort Process .
    subsort Process < Cid .
    op Process : -> Process .
    op nodes:_ : Set{Node} -> Attribute [gather(&)] .        
    op flows:_ : Set{Flows} -> Attribute [gather(&)] .
    op tokens:_ : Token -> Attribute [gather(&)] .
    op gtime:_ : Int -> Attribute [gather(&)] .
    op resources:_ : Set{Resource} -> Attribute [gather(&)] .
    op events:_ : Set{EventInstance} -> Attribute [gather(&)] .

    --- class Process | nodes: Set{Node},
    ---                flows: Set{Flow},
    ---                tokens: List{Token},
    ---                gtime: Time,
    ---                resources: Set{Resource},
    ---                events: Set{EventInstance} . 

    
    


endm